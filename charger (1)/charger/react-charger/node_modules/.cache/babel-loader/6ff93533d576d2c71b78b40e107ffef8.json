{"ast":null,"code":"var _jsxFileName = \"C:\\\\oamk\\\\web-frameworks\\\\charger\\\\react-charger\\\\src\\\\Components\\\\ChargeModule.js\";\nimport React from 'react';\nimport { data, historyEntrys } from './data/Data.js';\nimport HistoryTable from './HistoryModule.js';\nimport { getPricing } from './HistoryModule.js';\nimport json from './data/charging_Data.json'; /////////////////////////////////////////////\n//Charge Class\n/////////////////////////////////////\n\nclass ChargeModule extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        value: event.target.value\n      });\n    };\n\n    this.startCharging = event => {\n      let found = this.state.items.find(element => element.code == this.state.value);\n\n      if (found != null) {\n        alert(found.location);\n        this.setState({\n          found: found,\n          charging: true,\n          startTime: new Date()\n        });\n      } else {\n        alert(\"code does not exist\");\n      }\n    };\n\n    this.endCharging = () => {\n      historyEntrys.push({\n        code: this.state.found.code,\n        location: this.state.found.location,\n        timeStart: this.state.startTime,\n        // need to send right date here\n        duration: this.state.timerSeconds,\n        kW: this.state.found.kW,\n        pricing: this.state.found.pricing\n      });\n      this.setState({\n        charging: false\n      });\n    };\n\n    this.chargeModuleNormal = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.value,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.startCharging.bind(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }\n      }, \" Start charging \"), /*#__PURE__*/React.createElement(HistoryTable, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 6\n        }\n      }));\n    };\n\n    this.chargeModuleCharging = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.endCharging.bind(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 9\n        }\n      }, \" End charging \")), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }\n      }, \" Code: \", this.state.found.code, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }\n      }, \"Time charging: \", this.state.timerSeconds), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }\n      }, \"Costs: \", this.getPrice(this.state.found), \" Euro\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }\n      }, \"Charging power: \", this.state.found.kW, \" Kw\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 7\n        }\n      }, \"Location: \", this.state.found.location), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 7\n        }\n      }, \"Pricing: \", getPricing(this.state.found)), /*#__PURE__*/React.createElement(HistoryTable, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }));\n    };\n\n    this.state = {\n      charging: false,\n      value: '',\n      found: null,\n      startTime: new Date(),\n      time: new Date(),\n      timerSeconds: 0,\n      items: json.features.map(x => x.properties)\n    };\n  } /////////////////////////////////////////////\n  //Time functions\n  /////////////////////////////////////\n\n\n  componentDidMount() {\n    this.intervalID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  tick() {\n    this.setState({\n      time: new Date()\n    });\n    var a = (this.state.time.getTime() - this.state.startTime.getTime()) / 1000;\n    this.setState({\n      timerSeconds: Math.round(a)\n    });\n  } /////////////////////////////////////////////\n  //Pricing functions\n  /////////////////////////////////////\n  //   0 = Free, 1 = 20c/minute, 2= 18c/kWh\n\n\n  getPrice(data) {\n    if (data.pricing == 0) {\n      return 0;\n    } else if (data.pricing == 1) {\n      return Number((this.state.timerSeconds / 60 * 0.2).toFixed(2));\n    } else if (data.pricing == 2) {\n      return Number(this.state.timerSeconds / data.kW * 0.18).toFixed(2);\n    }\n  } /////////////////////////////////////////////\n  //Charging functions\n  /////////////////////////////////////\n\n\n  render() {\n    if (this.state.charging) {\n      return this.chargeModuleCharging();\n    } else {\n      return this.chargeModuleNormal();\n    }\n  }\n\n}\n\nexport default ChargeModule;","map":{"version":3,"sources":["C:/oamk/web-frameworks/charger/react-charger/src/Components/ChargeModule.js"],"names":["React","data","historyEntrys","HistoryTable","getPricing","json","ChargeModule","Component","constructor","props","handleChange","event","setState","value","target","startCharging","found","state","items","find","element","code","alert","location","charging","startTime","Date","endCharging","push","timeStart","duration","timerSeconds","kW","pricing","chargeModuleNormal","bind","chargeModuleCharging","getPrice","time","features","map","x","properties","componentDidMount","intervalID","setInterval","tick","componentWillUnmount","clearInterval","a","getTime","Math","round","Number","toFixed","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {data, historyEntrys} from './data/Data.js';\r\nimport HistoryTable from './HistoryModule.js';\r\nimport {getPricing} from './HistoryModule.js';\r\nimport json from './data/charging_Data.json';\r\n\r\n\r\n\r\n\r\n/////////////////////////////////////////////\r\n//Charge Class\r\n/////////////////////////////////////\r\n\r\nclass ChargeModule extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { charging: false,\r\n        value: '',\r\n        found: null,\r\n        startTime: new Date(),\r\n        time: new Date(),\r\n        timerSeconds: 0,\r\n        items: json.features.map(x => x.properties)\r\n        \r\n        }\r\n      }\r\n\r\n\r\n/////////////////////////////////////////////\r\n//Time functions\r\n/////////////////////////////////////\r\n\r\n\r\ncomponentDidMount() {\r\n    this.intervalID = setInterval(\r\n      () => this.tick(),\r\n      1000\r\n    );\r\n  }\r\n  componentWillUnmount() {\r\n    clearInterval(this.intervalID);\r\n  }\r\n  tick() {\r\n    this.setState({\r\n      time: new Date()})\r\n\r\n      var a = (this.state.time.getTime() - this.state.startTime.getTime()) /1000;\r\n      this.setState({ timerSeconds: Math.round(a)})\r\n    ;\r\n    }\r\n\r\n/////////////////////////////////////////////\r\n//Pricing functions\r\n/////////////////////////////////////\r\n//   0 = Free, 1 = 20c/minute, 2= 18c/kWh\r\n\r\n\r\ngetPrice(data)\r\n{\r\nif (data.pricing == 0) {return 0}\r\nelse if(data.pricing == 1) {return Number((this.state.timerSeconds / 60 * 0.2).toFixed(2));}\r\nelse if(data.pricing == 2) {return Number((this.state.timerSeconds / data.kW * 0.18)).toFixed(2);}\r\n}\r\n\r\n\r\n/////////////////////////////////////////////\r\n//Charging functions\r\n/////////////////////////////////////\r\n\r\n\r\nhandleChange = (event) =>\r\n{\r\n    this.setState({value: event.target.value});\r\n}\r\n\r\nstartCharging = (event) =>\r\n{\r\n    \r\n    \r\n\r\n    let found = this.state.items.find(element => element.code == this.state.value);\r\n    if (found != null) \r\n    {\r\n        alert(found.location );\r\n        this.setState({ found: found,\r\n                        charging: true,\r\n                        startTime: new Date()})\r\n        \r\n    }else{\r\n        alert(\"code does not exist\")\r\n    }\r\n}\r\n\r\n  \r\nendCharging = () => {\r\nhistoryEntrys.push(\r\n    {\r\n        code: this.state.found.code,\r\n        location: this.state.found.location,\r\n        timeStart:  this.state.startTime, // need to send right date here\r\n        duration: this.state.timerSeconds,\r\n        kW: this.state.found.kW,\r\n        pricing: this.state.found.pricing\r\n    })\r\n\r\n\r\n    \r\n    this.setState({charging: false})\r\n    \r\n}\r\n\r\nchargeModuleNormal = () => \r\n{\r\nreturn( \r\n    <div>\r\n     <input type=\"text\" value={this.state.value}  onChange={this.handleChange}/>  \r\n     <button onClick={this.startCharging.bind()}> Start charging </button>\r\n     <HistoryTable/>\r\n    </div>\r\n )   \r\n}\r\n\r\nchargeModuleCharging = () => \r\n{\r\nreturn( \r\n    <div>\r\n      <span>\r\n        <button onClick={this.endCharging.bind()}> End charging </button>\r\n      </span>\r\n      <p>\r\n      <div> Code: {this.state.found.code} </div>\r\n      </p>\r\n      <p>\r\n        Time charging: {this.state.timerSeconds}\r\n      </p>\r\n      <p>\r\n      Costs: {this.getPrice(this.state.found)} Euro\r\n      </p>\r\n      <p>\r\n        Charging power: {this.state.found.kW} Kw\r\n      </p>\r\n      <p>\r\n          Location: {this.state.found.location}\r\n      </p>\r\n      <p>\r\n        Pricing: {getPricing(this.state.found)}\r\n      </p>\r\n      \r\n      <HistoryTable/>\r\n\r\n    </div>\r\n )   \r\n}\r\n\r\n    render () {\r\n      \r\n        if (this.state.charging)\r\n        {\r\n            return this.chargeModuleCharging()\r\n        } else {\r\n        return this.chargeModuleNormal()}\r\n        }\r\n        \r\n        \r\n    }\r\n\r\nexport default ChargeModule;\r\n\r\n"]},"metadata":{},"sourceType":"module"}